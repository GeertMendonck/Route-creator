<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Geo Route Builder (v1.0)</title>

  <!-- Leaflet (CDN) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="style.css">
 
</head>

<body>
<div class="wrap">
  <div class="left">
    <h2>Geo Route Builder <span class="pill">v1</span></h2>
    <div class="note mini">
      Klik op de kaart om een locatie toe te voegen. Sleep markers om lat/lng te wijzigen.
      Gebruik “Export” om je JSON te downloaden.
    </div>

    <div class="btnbar">
      <button id="btnNew">Nieuw</button>
      <button id="btnExport">Export JSON</button>
      <label style="display:inline-block">
        <input id="fileImport" type="file" accept=".json" style="display:none">
        <button id="btnImport">Import JSON</button>
      </label>
    </div>

    <h3>Meta</h3>
    <label>Titel</label>
    <input id="metaTitle" type="text" />
    <label>Subtitel</label>
    <input id="metaSubtitle" type="text" />
    <label>Versie</label>
    <input id="metaVersion" type="text" />

    <div class="split" style="margin-top:8px">
      <input id="metaCharactersEnabled" type="checkbox">
      <div style="flex:1">
        <div><b>Personages gebruiken</b> <span class="pill mini">optioneel</span></div>
        <div class="mini">Als je dit aanzet, exporteren we <code>meta.characters</code> mee.</div>
      </div>
    </div>
    <div id="metaCharactersBox" style="display:none; margin-top:6px">
      <label>Personages bronbestand</label>
      <input id="metaCharactersSource" type="text" placeholder="personages.json" />
    </div>

    <h3>Settings</h3>
    <label>visibilityMode</label>
    <select id="setVisibilityMode">
      <option value="nextOnly">nextOnly</option>
      <option value="allAfterStart">allAfterStart</option>
      <option value="all">all</option>
    </select>

    <label>multiLocationSlotMode</label>
    <select id="setMultiLocSlotMode">
      <option value="any">any</option>
      <option value="random">random</option>
      <option value="nearest">nearest</option>
      <option value="all">all</option>
    </select>

    <div class="row" style="margin-top:8px">
      <div class="split"><input id="setShowOptionalSlots" type="checkbox"><div>showOptionalSlots</div></div>
      <div class="split"><input id="setListShowFutureSlots" type="checkbox"><div>listShowFutureSlots</div></div>
    </div>
    <div class="row" style="margin-top:8px">
      <div class="split"><input id="setMapShowFutureLocations" type="checkbox"><div>mapShowFutureLocations</div></div>
      <div></div>
    </div>

    <h3>Prestart</h3>
    <label>useLocationId</label>
    <select id="preUseLocationId"></select>

    <label>meetingPoint label</label>
    <input id="preMeetingLabel" type="text" placeholder="Aan de voordeur" />

    <div class="row">
      <div>
        <label>meetingPoint lat</label>
        <input id="preMeetingLat" type="number" step="any" />
      </div>
      <div>
        <label>meetingPoint lng</label>
        <input id="preMeetingLng" type="number" step="any" />
      </div>
    </div>

    <div class="btnbar">
      <button id="btnSetMeetingPoint">Meeting point zetten via kaartklik</button>
    </div>
    <div class="btnbar">
    <button id="btnMakePrestartStartSlot">Maak prestart = startslot + startlocatie</button>
    </div>


    <label>message</label>
    <textarea id="preMessage"></textarea>

    <label>maps.label</label>
    <input id="preMapsLabel" type="text" placeholder="Route naar startpunt" />
    <button id="btnSyncPrestartStart">Sync prestart → startslot+startloc (veilig)</button>

    <h3>Slots</h3>
    <div class="btnbar">
      <button id="btnAddSlot">+ Slot</button>
    </div>
    <table id="slotsTable">
      <thead>
        <tr>
          <th style="width:18%">id</th>
          <th style="width:22%">label</th>
          <th style="width:10%">req</th>
          <th style="width:25%">unlockAfter</th>
          <th style="width:15%">completeMode</th>
          <th style="width:10%"></th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h3>Locaties</h3>
    <div class="note mini" style="margin:8px 0">
     Klik op de kaart om een locatie toe te voegen.
    </div>

    <table id="locsTable">
      <thead>
        <tr>
          <th style="width:22%">id</th>
          <th style="width:18%">slot</th>
          <th style="width:20%">naam</th>
          <th style="width:10%">rad</th>
          <th style="width:20%">lat/lng</th>
          <th style="width:10%"></th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h3>Controle</h3>
    <div id="validationBox" class="note mini"></div>

    <div class="mini" style="margin-top:10px; opacity:.7">
      Tip: klik een locatie in de tabel om er naartoe te zoomen op de kaart.
    </div>
  </div>

  <div class="right">
    <div id="map"></div>
  </div>
</div>
<div id="uiTip" class="uiTip" role="tooltip" aria-hidden="true"></div>
<script src="app.js"></script>
</body>
</html>
